/* **********************************************
     Begin customBindings.js
********************************************** *///custom binding for currency formatting (wrapper to text binding)
ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart"
,ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON
(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items)
)}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend
({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle
:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=
ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};ko.bindingHandlers.currency={update:function(e,t){var n=parseFloat(ko.utils.unwrapObservable(t()))||0,r=function(){return"$"+n.toFixed(2)};ko.bindingHandlers.text.update(e,r)}};ko.bindingHandlers.clickWithData={init:function(e,t,n,r,i){var s=$(e).data(),o=t().bind(this,s);delete s.bind;ko.applyBindingsToNode(e,{click:o})}};ko.observable.fn.asPositiveInteger=function(e){var t=this,n=ko.computed({read:t,write:function(n){var r=parseInt(n,10);if(isNaN(r)||r<0)r=e;t(r)}});n(t());return n};var Tekpub=Tekpub||{};Tekpub.CartItem=function(e,t){var n={},r=e.quantity||1;n.price=e.price||0;n.quantity=ko.observable(r).asPositiveInteger(1);n.sku=e.sku||"";n.description=e.description||"";n.priceInPennies=function(){return n.price*100};n.subtotal=ko.computed(function(){return n.price*n.quantity()});n.discount=ko.computed(function(){return n.quantity()>=5?n.subtotal()*.2:0});n.lineTotal=ko.computed(function(){return(n.price-n.discount())*n.quantity()});t&&n.quantity.subscribe(function(e){t.call(n,n)});return n};Tekpub.Cart=function(){var e=this,t=JSON.parse(localStorage.getItem("tekpubCart"))||[];e.items=ko.observableArray();e.itemQuantityCheck=function(t){t&&t.quantity()===0&&e.items.remove(t)};e.items(ko.utils.arrayMap(t,function(t){return Tekpub.CartItem(t,e.itemQuantityCheck)}));e.addItem=function(t){var n=e.find(t.sku),r=e.items();if(n)n.quantity(n.quantity()+parseInt(t.quantity||1,10));else{n=Tekpub.CartItem(t,e.itemQuantityCheck);e.items.push(n)}return n};e.rowCount=function(){return e.items().length};e.remove=function(t){e.items.remove(function(e){return e.sku==t})};e.removeClicked=function(t){e.remove(t.sku)};e.itemCount=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.quantity});return t};e.total=function(){var t=0;ko.utils.arrayForEach(e.items(),function(e){t+=e.lineTotal()});return t};e.empty=function(){e.items([])};e.find=function(t){return ko.utils.arrayFirst(e.items(),function(e){return e.sku===t})};ko.computed(function(){localStorage.setItem("tekpubCart",ko.toJSON(e.items))}).extend({throttle:1});e.hasItems=ko.computed(function(){return e.rowCount()>0});e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return e};