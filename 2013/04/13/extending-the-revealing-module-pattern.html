<!DOCTYPE html>
<html lang="en-US">
<head>
  	<title>Mat McLoughlin</title>

  	<meta charset="UTF-8" />
  	<meta name="viewport" content="width=device-width" />
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0" />
	<meta name="description" content=".Net developer and lover of javascript. This blog contains my thoughts and ramblings.">
	<meta name="author" content="Mathew McLoughlin">
  
	<link rel="shortcut icon" href="/images/favicon.ico" />

  	<link href="" rel="alternate" title="" type="application/atom+xml">
  
	<link rel='stylesheet' href='/stylesheets/style.css' type='text/css' media='all' />
	<link rel='stylesheet' href='/stylesheets/includes/fonts/fontawesome/font-awesome.css' type='text/css' media='screen' />
	<link rel='stylesheet' href='/stylesheets/media-queries.css' type='text/css' media='screen' />
	<link rel='stylesheet' href='/stylesheets/pygments.css' type='text/css' media='screen' />

	<style type="text/css">
		a, #cancel-comment-reply i {
			color: rgba(0,83,159,0.65);
		}

		.next-prev a, #respond .respond-submit, .wpcf7-submit, .header .search-form .submit, .search-form .submit { 
			background: rgba(0,83,159,1);
		}

		.infinite-scroll #infinite-handle {
			overflow: auto;
		}
	</style>

	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css' />
	<link rel='stylesheet' id='google-raleway-css'  href='http://fonts.googleapis.com/css?family=Raleway%3A300%2C500%2C700%2C800&#038;ver=3.6.1' type='text/css' media='all' />
	<script type="text/javascript" src="http://codeorigin.jquery.com/jquery-1.10.2.min.js"></script>
</head>
<body class="home blog infinite-scroll"> 
	<header role="banner" class="header"> 
		<hgroup>
			<h1 class="logo-text">
				<a href="/" title="Mat McLoughlin">Mat McLoughlin</a>
			</h1>
			<h2 class="logo-subtitle">A calm sea does not make a skilled sailor</h2> 
		</hgroup> 
  		<nav role="navigation" class="header-nav"> 
  			<ul id="menu-header" class="nav">
    			<li id="menu-item-blog">
      				<a href="/">Blog</a>
    			</li>
    			<li id="menu-item-talks">
      				<a href="/talks.html">Talks</a>
    			</li>
    			<li id="menu-item-archive">
  					<a href="/archives.html">Archive</a>
    			</li>
  			</ul>
		</nav>
	</header>
	<div id="wrapper">
		<div id="main">
			<div id="content">
				<style type="text/css">
.nav #menu-item-blog a {
    color: #fff;
}
</style>

<div class="posts">
    <article class="post" style="margin-bottom: 0;"> 
        

        <div class="box-wrap">
            <div class="box"> 
                <header class="post-header">
                    <div class="date-title">13 April, 2013</div>
                    <h2 class="entry-title">
                        <a href="http://mat-mcloughlin.net/2013/04/13/extending-the-revealing-module-pattern.html" title="Extending the Revealing Module Pattern">Extending the Revealing Module Pattern</a>
                    </h2> 
                </header>
                <div class="post-content">
                    <p>Somebody needs to tell me why this is a bad idea as I feel it should be.</p>

<p>Most people working with javascript should be aware of the revealing module pattern, but if you’re not here’s a quick <a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript">example</a>. The idea is to create a javascript object where only the methods and variables you want accessible are public. This is achieved by defining all your functions and variables in a private scope (or function) and then return an object with pointers to the ones you want publicly accessible.</p>

<p>However one thing I’ve found is it can be tricky to deal with ‘this’ when things get complicated. For example, in the code below you have to use call to set the value variable.</p>
<div class='highlight'><pre><code class='js'><span class='lineno'> 1</span> <span class='kd'>var</span> <span class='nx'>myConstructor</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>(){</span>
<span class='lineno'> 2</span> 	
<span class='lineno'> 3</span>   <span class='kd'>var</span> <span class='nx'>foo</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>(){</span>
<span class='lineno'> 4</span>     <span class='nx'>bar</span><span class='p'>.</span><span class='nx'>call</span><span class='p'>(</span><span class='k'>this</span><span class='p'>);</span>
<span class='lineno'> 5</span>   <span class='p'>};</span>
<span class='lineno'> 6</span>   
<span class='lineno'> 7</span>   <span class='kd'>var</span> <span class='nx'>bar</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{;</span>
<span class='lineno'> 8</span>     <span class='k'>this</span><span class='p'>.</span><span class='nx'>value</span> <span class='o'>=</span> <span class='mi'>2</span><span class='p'>;</span> 
<span class='lineno'> 9</span>   <span class='p'>};</span>
<span class='lineno'>10</span>   
<span class='lineno'>11</span>   <span class='k'>return</span> <span class='p'>{</span>
<span class='lineno'>12</span>     <span class='nx'>foo</span><span class='o'>:</span> <span class='nx'>foo</span><span class='p'>,</span>
<span class='lineno'>13</span>     <span class='nx'>value</span><span class='o'>:</span> <span class='mi'>1</span>
<span class='lineno'>14</span>   <span class='p'>};</span>
<span class='lineno'>15</span> <span class='p'>};</span>
<span class='lineno'>16</span> 
<span class='lineno'>17</span> <span class='kd'>var</span> <span class='nx'>obj</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>myConstructor</span><span class='p'>();</span>
<span class='lineno'>18</span> <span class='nx'>alert</span><span class='p'>(</span><span class='nx'>obj</span><span class='p'>.</span><span class='nx'>value</span><span class='p'>);</span> <span class='c1'>// value = 1</span>
<span class='lineno'>19</span> <span class='nx'>obj</span><span class='p'>.</span><span class='nx'>foo</span><span class='p'>();</span>
<span class='lineno'>20</span> <span class='nx'>alert</span><span class='p'>(</span><span class='nx'>obj</span><span class='p'>.</span><span class='nx'>value</span><span class='p'>);</span> <span class='c1'>// value = 2</span>
</code></pre></div>
<p>This becomes even more of a pain when you start with callbacks. So to get round the problem. Is it not better to do this?</p>
<div class='highlight'><pre><code class='js'><span class='lineno'> 1</span> <span class='kd'>var</span> <span class='nx'>myConstructor</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>(){</span>
<span class='lineno'> 2</span>   <span class='kd'>var</span> <span class='nx'>self</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>;</span>
<span class='lineno'> 3</span> 	
<span class='lineno'> 4</span>   <span class='kd'>var</span> <span class='nx'>foo</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>(){</span>
<span class='lineno'> 5</span>     <span class='nx'>bar</span><span class='p'>();</span>
<span class='lineno'> 6</span>   <span class='p'>};</span>
<span class='lineno'> 7</span>   
<span class='lineno'> 8</span>   <span class='kd'>var</span> <span class='nx'>bar</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{;</span>
<span class='lineno'> 9</span>     <span class='nx'>self</span><span class='p'>.</span><span class='nx'>value</span> <span class='o'>=</span> <span class='mi'>2</span><span class='p'>;</span> 
<span class='lineno'>10</span>   <span class='p'>};</span>
<span class='lineno'>11</span>   
<span class='lineno'>12</span>   <span class='k'>return</span> <span class='nx'>$</span><span class='p'>.</span><span class='nx'>extend</span><span class='p'>(</span><span class='nx'>self</span><span class='p'>,</span> <span class='p'>{</span>
<span class='lineno'>13</span>     <span class='nx'>foo</span><span class='o'>:</span> <span class='nx'>foo</span><span class='p'>,</span>
<span class='lineno'>14</span>     <span class='nx'>value</span><span class='o'>:</span> <span class='mi'>1</span>
<span class='lineno'>15</span>   <span class='p'>});</span>
<span class='lineno'>16</span> <span class='p'>};</span>
<span class='lineno'>17</span> 
<span class='lineno'>18</span> <span class='kd'>var</span> <span class='nx'>obj</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>myConstructor</span><span class='p'>();</span>
<span class='lineno'>19</span> <span class='nx'>alert</span><span class='p'>(</span><span class='nx'>obj</span><span class='p'>.</span><span class='nx'>value</span><span class='p'>);</span> <span class='c1'>// value = 1</span>
<span class='lineno'>20</span> <span class='nx'>obj</span><span class='p'>.</span><span class='nx'>foo</span><span class='p'>();</span>
<span class='lineno'>21</span> <span class='nx'>alert</span><span class='p'>(</span><span class='nx'>obj</span><span class='p'>.</span><span class='nx'>value</span><span class='p'>);</span> <span class='c1'>// value = 2</span>
</code></pre></div>
<p>That way you’ll always have access to the object, no matter how far down your function calls go. I know its a requirement on JQuery but it all seems to work fine.</p>

<p>I’m hoping somebody wiser than me can confirm why this might be a bad idea. Because it feels like it should be.</p>

<p><strong>Edit:</strong> Credit should go to <a href="https://twitter.com/robwesterlund">@robwesterlund</a> for this thinking. You’ll find him in <a href="http://jabbr.net">Jabbr</a></p>
                </div>
                <ul class="meta">
                    <div class="meta-title">Share</div>
                    <li>
                        <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://mat-mcloughlin.github.io/2013/04/13/extending-the-revealing-module-pattern.html" data-text="Extending the Revealing Module Pattern" data-via="mat_mcloughlin">Tweet</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                    </li>
                    <li> 
                        <a href="http://news.ycombinator.com/submit" class="hn-share-button">Vote on HN</a>
                        <script>(function(d, t) { var g = d.createElement(t), s = d.getElementsByTagName(t)[0]; g.src = '//hnbutton.appspot.com/static/hn.min.js'; s.parentNode.insertBefore(g, s); }(document, 'script'));</script>
                        </li>
                        <li>
                            <div class="g-plusone" data-size="medium" data-annotation="inline" data-width="300"></div>
                            <script type="text/javascript">(function() { var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true; po.src = 'https://apis.google.com/js/plusone.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s); })();</script>
                        </li>
                        <li>
                            <div class="fb-like" data-href="http://mat-mcloughlin.github.io/2013/04/13/extending-the-revealing-module-pattern.html" data-width="450" data-layout="button_count" data-show-faces="true" data-send="false"></div>
                            <div id="fb-root"></div>
                            <script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1"; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script>
                        </li>
                        <li class="next-prev-mobile">&nbsp;</li>
                        <li class="prev-mobile next-prev-mobile">
                            <a href="http://themes.okaythemes.com/pocket/2012/10/01/bart-goes-under-the-bay/" rel="prev"><i class="icon-arrow-left"></i> Previous Post</a>
                        </li>
                        <li class="next-prev-mobile">
                            <a href="http://themes.okaythemes.com/pocket/2012/10/01/a-trip-to-the-san-francisco-bay/" rel="next"><i class="icon-arrow-right"></i> Next Post</a>
                        </li>
                    </ul>
                </div>
            </div> 
        </div>
    </article>
</div>

<div id="comment-jump" class="comments"><div id="comments">
        <div class="comments-wrap">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
              /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
              var disqus_shortname = 'invalidargblog'; // required: replace example with your forum shortname

              /* * * DON'T EDIT BELOW THIS LINE * * */
              (function() {
                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>
</div>

<div class="next-prev">
    
        <div class="prev-post"> 
            <a href="/2013/04/10/403-error-and-dotnet-bundling.html" rel="prev">Previous Post</a>
        </div>
    
    
        <div class="next-post"> 
            <a href="/2013/04/22/custom-deferred-handlers.html" rel="next">Next Post</a>
        </div>
    
</div>


			</div>
		</div>
	</div>
	<footer id="footer">
		<div id="footer-inside">
			<div id="text-2" class="widget widget_text">
				<h2 class="widgettitle">Mathew McLoughlin</h2>
				<div class="textwidget">Net developer and lover of javascript. I enjoy climbing and surfing (in cold water). Powered by Beard.</div>
			</div>
			<div id="recent-posts-3" class="widget widget_recent_entries">
				<h2 class="widgettitle">Recent Posts</h2>
				<ul>
					
						<li><a href="/2013/12/24/chocolatey-the-schema-version-is-incompatible.html" title="Chocolatey: The schema version is incompatible" title="Chocolatey: The schema version is incompatible">Chocolatey: The schema version is incompatible</a></li>
					
						<li><a href="/2013/12/12/this-code-is-bad-and-you-should-feel-bad.html" title="This Code is Bad and you should feel Bad" title="This Code is Bad and you should feel Bad">This Code is Bad and you should feel Bad</a></li>
					
						<li><a href="/2013/12/01/twelve-achivements-to-unlock.html" title="12 life achievements to unlock" title="12 life achievements to unlock">12 life achievements to unlock</a></li>
					
				</ul>
			</div>
			<div id="archives-2" class="widget widget_archive">
				<h2 class="widgettitle">Social Links</h2>
				<ul>
					<li>
						<i class="icon-twitter"></i> <a href="https://twitter.com/mat_mcloughlin" title="Twitter">Twitter</a></li>
					<li>
						<i class="icon-github"></i> <a href="https://github.com/mat-mcloughlin" title="GitHub">GitHub</a>
					</li>
					<li>
						<i class="icon-rss"></i> <a href="/rss.xml" title="August 2012">RSS</a>
					</li>
				</ul>
			</div>
		</div> 
	</footer>
	
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-1746767-6']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
</body>
</html>